## @section ntfy parameters

## @param replicaCount The number of replicas to deploy.
## @param image.repository The Docker repository to pull the image from.
## @param image.tag The image tag to use.
## @param image.pullPolicy The logic of image pulling.
## @param imagePullSecrets The image pull secrets to use.
## @param deployment.strategy.type The deployment strategy to use.
## @param serviceAccount.create Whether to create a service account.
## @param serviceAccount.annotations Additional annotations to add to the service account.
## @param serviceAccount.name The name of the service account to use. If not set and create is true, a new service account will be created with a generated name.
## @param podAnnotations Additional annotations to add to the pod.
## @param podSecurityContext The security context to use for the pod.
## @param securityContext The security context to use for the container.
## @param initContainers Additional init containers to add to the pod.
## @param service.type The type of service to create.
## @param service.port The port on which the service will run.
## @param service.nodePort The nodePort to use for the service. Only used if service.type is NodePort.
## @param ingress.enabled Whether to create an ingress for the service.
## @param ingress.className The ingress class name to use.
## @param ingress.annotations Additional annotations to add to the ingress.
## @param ingress.hosts[0].host The host to use for the ingress.
## @param ingress.hosts[0].paths[0].path The path to use for the ingress.
## @param ingress.hosts[0].paths[0].pathType The path type to use for the ingress.
## @param ingress.tls The TLS configuration for the ingress.
## @param resources The resources to use for the pod.
## @param autoscaling.enabled Whether to enable autoscaling.
## @param autoscaling.minReplicas The minimum number of replicas to scale to.
## @param autoscaling.maxReplicas The maximum number of replicas to scale to.
## @param autoscaling.targetCPUUtilizationPercentage The target CPU utilization percentage to use for autoscaling.
## @param autoscaling.targetMemoryUtilizationPercentage The target memory utilization percentage to use for autoscaling.
## @param nodeSelector The node selector to use for the pod.
## @param tolerations The tolerations to use for the pod.
## @param affinity The affinity to use for the pod.
## @param env Environment variables to set for the container (map format).
## @param persistence.enabled Whether to enable persistence for the cache.
## @param persistence.storageClass The storage class to use for the persistence.
## @param persistence.existingClaim The name of an existing claim to use for the persistence.
## @param persistence.accessMode The access mode to use for the persistence.
## @param persistence.size The size to use for the persistence.
## @param persistence.additionalVolumes Additional volumes to add to the pod.
## @param persistence.additionalMounts Additional volume mounts to add to the pod.
## @param config.enabled Whether to enable server.yml configuration via ConfigMap.
## @param config.baseUrl Base URL for the ntfy server (required for attachments, emails, iOS push).
## @param config.cacheFile Path to the cache database file.
## @param config.cacheDuration Duration for which messages are cached.
## @param config.authFile Path to the authentication database file.
## @param config.authDefaultAccess Default access level (read-write, read-only, write-only, deny-all).
## @param config.authUsers List of users to provision in format "<username>:<password-hash>:<role>".
## @param config.authAccess List of access control entries in format "<username>:<topic-pattern>:<access>".
## @param config.authTokens List of access tokens in format "<username>:<token>[:<label>]".
## @param config.behindProxy Whether ntfy is behind a proxy.
## @param config.attachmentCacheDir Directory for attachment cache.
## @param config.attachmentTotalSizeLimit Total size limit for attachments.
## @param config.attachmentFileSizeLimit Per-file size limit for attachments.
## @param config.attachmentExpiryDuration Duration after which attachments expire.
## @param config.enableLogin Whether to enable the login page.
## @param config.enableSignup Whether to enable user signup.
## @param config.enableReservations Whether to enable topic reservations.
## @param config.upstreamBaseUrl Upstream base URL for web push.
## @param config.webPushPublicKey Web push VAPID public key.
## @param config.webPushPrivateKey Web push VAPID private key.
## @param config.webPushFile Path to web push database file.
## @param config.webPushEmailAddress Email address for web push.
## @param config.extraConfig Additional configuration in YAML format.
##
replicaCount: 1

image:
  repository: binwiederhier/ntfy
  pullPolicy: IfNotPresent
  tag: "v2.16.0"

imagePullSecrets: []

deployment:
  strategy:
    type: Recreate

serviceAccount:
  create: true
  annotations: {}
  name: ""

podAnnotations: {}

podSecurityContext: {}
  # fsGroup: 2000

securityContext: {}
  # capabilities:
  #   drop:
  #   - ALL
  # readOnlyRootFilesystem: true
  # runAsNonRoot: true
  # runAsUser: 1000

# -- Init Containers
initContainers: []
  # - name: init-container
  #   image: busybox
  #   command: ['sh', '-c', 'echo "this is an init container"']

service:
  type: LoadBalancer
  port: 80
  nodePort: ""

ingress:
  enabled: false
  className: ""
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
  hosts:
    - host: chart-example.local
      paths:
        - path: /
          pathType: ImplementationSpecific
  tls: []
  #  - secretName: chart-example-tls
  #    hosts:
  #      - chart-example.local

resources: {}
  # limits:
  #   cpu: 100m
  #   memory: 128Mi
  # requests:
  #   cpu: 100m
  #   memory: 128Mi

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 100
  targetCPUUtilizationPercentage: 80
  targetMemoryUtilizationPercentage: 80

nodeSelector: {}

tolerations: []

affinity: {}

# Environment variables for ntfy configuration
# See https://docs.ntfy.sh/config/ for more options
env: {}
  # TZ: "UTC"
  # NTFY_BASE_URL: "https://ntfy.example.com"
  # NTFY_CACHE_FILE: "/var/cache/ntfy/cache.db"

persistence:
  enabled: true
  storageClass: ""
  existingClaim: ""
  accessMode: ReadWriteOnce
  size: 1Gi
  additionalVolumes: []
  additionalMounts: []

## @section Velero Backup Schedule parameters

## @param velero.enabled Whether to enable Velero backup schedules
## @param velero.schedule The cron schedule for Velero backups (e.g., "0 2 * * *" for 2am daily)
## @param velero.ttl Time to live for backups (e.g., "720h" for 30 days)
## @param velero.includeClusterResources Whether to include cluster-scoped resources in backup
## @param velero.snapshotVolumes Whether to take volume snapshots
## @param velero.defaultVolumesToFsBackup Whether to use file system backup for volumes by default
## @param velero.storageLocation The storage location for backups (leave empty for default)
## @param velero.volumeSnapshotLocations The volume snapshot locations (leave empty for default)
## @param velero.labelSelector Additional label selector to filter resources (optional)
## @param velero.annotations Additional annotations to add to the Velero Schedule resources
velero:
  enabled: false
  schedule: "0 2 * * *"
  ttl: "720h"
  includeClusterResources: false
  snapshotVolumes: true
  defaultVolumesToFsBackup: false
  storageLocation: ""
  volumeSnapshotLocations: []
  labelSelector: {}
  annotations: {}

# ntfy server.yml configuration
# This allows you to configure ntfy server settings via a ConfigMap
# including authentication, topics, and access control
# See https://docs.ntfy.sh/config/ for all available options
config:
  enabled: false
  # Base URL for the ntfy server (required for attachments, emails, iOS push, etc.)
  baseUrl: ""
  # Cache configuration
  cacheFile: "/var/cache/ntfy/cache.db"
  cacheDuration: "12h"
  # Authentication configuration
  authFile: "/var/cache/ntfy/auth.db"
  authDefaultAccess: "read-write"  # Options: read-write, read-only, write-only, deny-all
  # Provision users in format: "<username>:<password-hash>:<role>"
  # Use 'ntfy user hash' to generate password hash (never use online generators with real passwords)
  # Example: "username:[bcrypt-hash]:admin"
  authUsers: []
    # - "admin:[bcrypt-hash-for-admin]:admin"
    # - "user1:[bcrypt-hash-for-user1]:user"
  # Provision access control entries in format: "<username>:<topic-pattern>:<access>"
  # Access types: read-write (rw), read-only (ro), write-only (wo), deny (none)
  # Example: "phil:mytopic:rw" or "*:announcements:ro" for anonymous read-only
  authAccess: []
    # - "phil:mytopic:rw"
    # - "*:announcements:ro"
  # Provision access tokens in format: "<username>:<token>[:<label>]"
  # Use 'ntfy token generate' to generate tokens
  authTokens: []
    # - "phil:tk_3gd7d2yftt4b8ixyfe9mnmro88o76:My Token"
  # Set to true if ntfy is behind a proxy
  behindProxy: false
  # Attachment configuration
  attachmentCacheDir: ""
  attachmentTotalSizeLimit: "5G"
  attachmentFileSizeLimit: "15M"
  attachmentExpiryDuration: "3h"
  # Login and signup settings
  enableLogin: true
  enableSignup: false
  enableReservations: false
  # Web Push configuration (for browser notifications)
  upstreamBaseUrl: ""
  webPushPublicKey: ""
  webPushPrivateKey: ""
  webPushFile: ""
  webPushEmailAddress: ""
  # Extra configuration to append to server.yml (in YAML format)
  extraConfig: ""


## @section ArgoCD Image Updater parameters

## @param imageUpdater.enabled Enable ArgoCD Image Updater integration. Creates an ImageUpdater CRD for automatic image updates.
## @param imageUpdater.namespace Namespace where the ImageUpdater CRD will be created.
## @param imageUpdater.argocdNamespace Namespace where ArgoCD Applications are located.
## @param imageUpdater.applicationName Name or pattern of the ArgoCD Application to update. Defaults to Release name.
## @param imageUpdater.imageAlias Alias for the image in the ImageUpdater CRD. Defaults to Release name.
## @param imageUpdater.updateStrategy Strategy for image updates (semver, latest, newest-build, name, alphabetical, digest).
## @param imageUpdater.forceUpdate Force update even if image is not currently deployed.
## @param imageUpdater.allowTags Match function for allowed tags (e.g., "regexp:^[0-9]+\\.[0-9]+\\.[0-9]+$" or "any").
## @param imageUpdater.ignoreTags List of glob patterns to ignore specific tags.
## @param imageUpdater.pullSecret Reference to secret for private registry authentication.
## @param imageUpdater.platforms List of target platforms (e.g., ["linux/amd64", "linux/arm64"]).
## @param imageUpdater.helm Helm-specific configuration for parameter names (e.g., {name: "image.repository", tag: "image.tag"}).
## @param imageUpdater.kustomize Kustomize-specific configuration (e.g., {name: "original/image"}).
## @param imageUpdater.writeBackConfig Write-back configuration for GitOps.
##
imageUpdater:
  enabled: false
  namespace: argocd
  argocdNamespace: argocd
  applicationName: ""
  imageAlias: ""
  updateStrategy: ""
  forceUpdate: false
  allowTags: ""
  ignoreTags: []
  pullSecret: ""
  platforms: []
  helm: {}
  kustomize: {}
  writeBackConfig: {}
