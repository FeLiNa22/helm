# Example values file for Outline with password persistence
# This demonstrates how to configure the chart to use auto-generated secrets
# that persist across chart upgrades.
#
# IMPORTANT: Replace 'my-outline' with your actual Helm release name throughout this file!

global:
  postgresqlEnabled: true
  redisEnabled: true
  minioEnabled: true

# Outline application configuration
outline:
  secretKey:
    value: ""  # REQUIRED: Set a 32+ character secret key or use existingSecret
  utilsSecret:
    value: ""  # REQUIRED: Set a 32+ character utils secret or use existingSecret
  service:
    url: "https://outline.example.com"  # REQUIRED: Set your actual URL

# PostgreSQL configuration
# The chart auto-creates a secret named: <release-name>-postgresql-auth
postgresql:
  auth:
    username: outline
    database: outline
    # Set this to enable password persistence (replace 'my-outline' with your release name)
    existingSecret: "my-outline-postgresql-auth"
    password: ""
    postgresPassword: ""

# Redis configuration  
redis:
  auth:
    enabled: true
    # Set this to enable password persistence (replace 'my-outline' with your release name)
    existingSecret: "my-outline-redis-auth"
    password: ""

# MinIO configuration
minio:
  auth:
    rootUser: "admin"
    # Set this to enable password persistence (replace 'my-outline' with your release name)
    existingSecret: "my-outline-minio-auth"
    rootPassword: ""

# USAGE INSTRUCTIONS:
# 
# 1. Replace 'my-outline' in all existingSecret fields above with your actual release name
# 2. Set the required fields (secretKey, utilsSecret, service.url)
# 3. Install the chart:
#    helm install my-outline raulpatel/outline -f this-file.yaml
#
# 4. The chart creates these secrets automatically:
#    - my-outline-postgresql-auth (PostgreSQL passwords)
#    - my-outline-redis-auth (Redis password)
#    - my-outline-minio-auth (MinIO password)
#
# 5. On subsequent upgrades, passwords are automatically preserved:
#    helm upgrade my-outline raulpatel/outline -f this-file.yaml
#
# Note: The secrets are created using Helm's lookup function, so they persist
# across upgrades even if the chart version changes.
